# Парсер "новостей" управ райнов с сайтов, с mos.ru
Паресер для страницы "новости" сайтов управ, райнов Москвы, сайта *.mos.ru написанный на typescript с использованием среды исполнения deno.

Писал впервую очередь для себя, есть мысли по тому, что я хотел бы реализовать еще, но не думаю, что он вообще кому-то понадобится...

Так же код плохо документирован (почти не документирован), логи пишутся как попало, но подробно. Код написан тоже так себе, но работает. Опять же, есть планы привести в порядок, если это кому-то вообще понадобится.

## Установка
Установите среду исполнения deno. Подробнее о том как установить ее в вашей системе, смотрите на [сайте](https://deno.land/#installation) deno.

Установите mariadb

### Arch
pacman -S deno mariadb

## Конфигурация
Откройте или создайте config.json и добавите туда следующую строчку
```json
{
   "database": {
      user: "root",
      password: "pass"
   },
   "cron": "*/5 * * * *"
}
```
user: - "user" - замените на пользователя для подключения к mysql (по умолчанию это пользователь root).

password: "pass" - пароль, который вы создали при настройки mysql.

Вы можете использовать системный cron или можете использовать cron внутри deno, как вам больше нравится!

*Внимание:* если вы используйте cron внутри deno (является поумолчанию, если вы никаких других не настраивали), то должны обеспечить возможность работы deno на фоне, даже если ваше соединение будет разорвано. Для linux можно использовать для такой цели screen или tmux.

## HSPMos
У парсера имеется http client - *HSPMos* - специально был реализован для работы с базой данных.

HSPMos - HttpServerParserMos

Необходимо, чтобы на сервере был открыт порт `8010` для работы клиента. Так же *HSPMos* никак не защищен снаружи, поэтому если ваш сервер, как и мой является публичным, то рекомендуется http клиент держать закрытом за чем-то. Я например для доступа к нему использую vpn поднятный на том же сервере и он закрыт за ним.

